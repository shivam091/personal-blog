{%- assign related_posts = page.related_posts -%}

{% if site.related_post.enabled and related_posts != empty %}
  <section id="related-posts" aria-labelledby="related-posts-heading">
    <h3 id="related-posts-heading">Related Posts</h3>
    <ul class="related-posts list-unstyled">
      {% for post in related_posts %}
        <li class="related-post">
          <article class="card">
            <header class="card-header">
              <h2 class="card-title post-title" title="{{ post.title }}">
                <a href="{{ post.url | relative_url }}" class="card-link" aria-label="Read post: {{ post.title }}">
                  {{ post.title | titleify }}
                </a>
              </h2>
              {% if post.excerpt %}
                <div class="post-excerpt">{{ post.excerpt }}</div>
              {% endif %}
            </header>
            <div class="card-body">
              {% if post.description %}
                <div class="post-description" title="{{ post.description | escape }}">{{ post.description }}</div>
              {% endif %}
            </div>
            <footer class="card-footer">
              <div class="page-meta">
                {% include pages/published-at.html item = post %}
              </div>
            </footer>
          </article>
        </li>
      {% endfor %}
    </ul>
  </section>
{% endif %}
